CREATE USER JSP_APP IDENTIFIED BY JSP_APP;
GRANT CONNECT TO JSP_APP;
GRANT ALL PRIVILEGES to JSP_APP;

DROP TABLE T_IB_MPREST_DOCUMENTI;
CREATE TABLE T_IB_MPREST_DOCUMENTI (ID_PROPOSTA NUMBER NOT NULL, TIPO_DOCUMENTO VARCHAR2(1000) NOT NULL, STATO VARCHAR2(1) NOT NULL, COD_GRUPPO VARCHAR2(256) NOT NULL, NOME_FILE VARCHAR2(2000) NOT NULL, DOCUMENTO BLOB NOT NULL, CONSTRAINT PK_T_IB_MPREST_DOCUMENTO PRIMARY KEY (ID_PROPOSTA, TIPO_DOCUMENTO, COD_GRUPPO));
DROP TABLE T_IB_MPREST_PRODOTTI;
CREATE TABLE T_IB_MPREST_PRODOTTI (CODICE_PRODOTTO VARCHAR2(500) NOT NULL, TIPO_PRODOTTO VARCHAR2(2) NOT NULL, CONSTRAINT PK_T_IB_MPREST_PRODOTTI PRIMARY KEY (CODICE_PRODOTTO));
DROP TABLE T_IB_MPREST_RIFIUTO;
CREATE TABLE T_IB_MPREST_RIFIUTO (CODICE_AUP VARCHAR2(2000) NOT NULL, ID_PROPOSTA NUMBER NOT NULL, RIFIUTO VARCHAR2(150) NOT NULL, MOTIVO_RIFIUTO VARCHAR2(2000) NOT NULL, CONSTRAINT PK_T_IB_MPREST_RIFIUTO PRIMARY KEY (CODICE_AUP, ID_PROPOSTA, RIFIUTO, MOTIVO_RIFIUTO));
DROP TABLE T_IB_MPREST_STEP;
CREATE TABLE T_IB_MPREST_STEP (CODICE_AUP VARCHAR2(2000) NOT NULL, COD_TIPO_DOCUMENTO VARCHAR2(1000) NOT NULL, DATA_PRESA_VISIONE DATE NOT NULL, TIPO_OPERAZIONE CHAR(1) NOT NULL, CODICE_PROPOSTA VARCHAR2(2000), CODICE_SEZIONE NUMBER NOT NULL, COD_BLOCCO VARCHAR2(2) NOT NULL, JSON BLOB, CONSTRAINT PK_T_IB_MPREST_STEP PRIMARY KEY (CODICE_AUP, COD_TIPO_DOCUMENTO, TIPO_OPERAZIONE, DATA_PRESA_VISIONE, CODICE_SEZIONE, COD_BLOCCO));

